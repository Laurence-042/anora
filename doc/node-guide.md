# ANORA èŠ‚ç‚¹ä½¿ç”¨æŒ‡å—

æœ¬æ–‡æ¡£è¯´æ˜Ž ANORA ä¸­å„ç±»èŠ‚ç‚¹çš„åŠŸèƒ½å’Œä½¿ç”¨æ–¹æ³•ã€‚

## ç›®å½•

- [ANORA èŠ‚ç‚¹ä½¿ç”¨æŒ‡å—](#anora-èŠ‚ç‚¹ä½¿ç”¨æŒ‡å—)
  - [ç›®å½•](#ç›®å½•)
  - [æ ¸å¿ƒæ¦‚å¿µ](#æ ¸å¿ƒæ¦‚å¿µ)
    - [èŠ‚ç‚¹](#èŠ‚ç‚¹)
    - [ç«¯å£ (Port)](#ç«¯å£-port)
    - [æ•°æ®ç±»åž‹](#æ•°æ®ç±»åž‹)
    - [è¿žæŽ¥è§„åˆ™](#è¿žæŽ¥è§„åˆ™)
  - [åŸºç¡€èŠ‚ç‚¹](#åŸºç¡€èŠ‚ç‚¹)
    - [ForwardNode (ä¸­ç»§)](#forwardnode-ä¸­ç»§)
    - [ParameterNode (å‚æ•°)](#parameternode-å‚æ•°)
  - [æ•°å­¦èŠ‚ç‚¹](#æ•°å­¦èŠ‚ç‚¹)
    - [ArithmeticNode (ç®—æœ¯è¿ç®—)](#arithmeticnode-ç®—æœ¯è¿ç®—)
  - [é€»è¾‘èŠ‚ç‚¹](#é€»è¾‘èŠ‚ç‚¹)
    - [CompareNode (æ¯”è¾ƒ)](#comparenode-æ¯”è¾ƒ)
    - [LogicNode (é€»è¾‘è¿ç®—)](#logicnode-é€»è¾‘è¿ç®—)
    - [BranchNode (åˆ†æ”¯)](#branchnode-åˆ†æ”¯)
  - [æŽ§åˆ¶æµèŠ‚ç‚¹](#æŽ§åˆ¶æµèŠ‚ç‚¹)
    - [DistributeNode (åˆ†é…/For-Each)](#distributenode-åˆ†é…for-each)
    - [AggregateNode (èšé›†)](#aggregatenode-èšé›†)
  - [å­—ç¬¦ä¸²èŠ‚ç‚¹](#å­—ç¬¦ä¸²èŠ‚ç‚¹)
    - [StringFormatNode (æ ¼å¼åŒ–)](#stringformatnode-æ ¼å¼åŒ–)
  - [æ•°æ®èŠ‚ç‚¹](#æ•°æ®èŠ‚ç‚¹)
    - [ObjectAccessNode (å¯¹è±¡è®¿é—®)](#objectaccessnode-å¯¹è±¡è®¿é—®)
    - [ObjectSetNode (å¯¹è±¡è®¾ç½®)](#objectsetnode-å¯¹è±¡è®¾ç½®)
    - [ArrayAccessNode (æ•°ç»„è®¿é—®)](#arrayaccessnode-æ•°ç»„è®¿é—®)
    - [ArrayPushNode (æ•°ç»„è¿½åŠ )](#arraypushnode-æ•°ç»„è¿½åŠ )
    - [ArrayLengthNode (æ•°ç»„é•¿åº¦)](#arraylengthnode-æ•°ç»„é•¿åº¦)
  - [è°ƒè¯•èŠ‚ç‚¹](#è°ƒè¯•èŠ‚ç‚¹)
    - [ConsoleLogNode (æŽ§åˆ¶å°è¾“å‡º)](#consolelognode-æŽ§åˆ¶å°è¾“å‡º)
    - [NotifyNode (é€šçŸ¥)](#notifynode-é€šçŸ¥)
  - [å¸¸è§æ¨¡å¼](#å¸¸è§æ¨¡å¼)
    - [å¾ªçŽ¯å¤„ç†](#å¾ªçŽ¯å¤„ç†)
    - [æ¡ä»¶åˆ†æ”¯](#æ¡ä»¶åˆ†æ”¯)
    - [æ•°æ®èšåˆ](#æ•°æ®èšåˆ)
  - [æ‰§è¡Œæœºåˆ¶è¯´æ˜Ž](#æ‰§è¡Œæœºåˆ¶è¯´æ˜Ž)
    - [æ¿€æ´»æ¡ä»¶](#æ¿€æ´»æ¡ä»¶)
    - [æ–°æ•°æ®å®šä¹‰](#æ–°æ•°æ®å®šä¹‰)
    - [inActivateOn ç«¯å£](#inactivateon-ç«¯å£)
  - [ç›¸å…³æ–‡æ¡£](#ç›¸å…³æ–‡æ¡£)

---

## æ ¸å¿ƒæ¦‚å¿µ

### èŠ‚ç‚¹

èŠ‚ç‚¹æ˜¯ ANORA ä¸­çš„åŸºæœ¬è®¡ç®—å•å…ƒï¼Œç›¸å½“äºŽå‡½æ•°çš„æŠ½è±¡ã€‚æ¯ä¸ªèŠ‚ç‚¹ï¼š

- æœ‰å¤šä¸ª**å…¥ç«¯å£**æŽ¥æ”¶æ•°æ®
- æœ‰å¤šä¸ª**å‡ºç«¯å£**è¾“å‡ºç»“æžœ
- å¯èƒ½æœ‰**æŽ§åˆ¶ç«¯å£**ç”¨äºŽæµç¨‹æŽ§åˆ¶
- å¯èƒ½æœ‰**é…ç½®é¡¹ (context)** ç”¨äºŽè®¾ç½®è¡Œä¸º

### ç«¯å£ (Port)

ç«¯å£æ˜¯èŠ‚ç‚¹æŽ¥æ”¶/å‘å‡ºæ•°æ®çš„æŽ¥å£ï¼Œåˆ†ä¸ºï¼š

| ç«¯å£ç±»åž‹     | ä½œç”¨                               |
| ------------ | ---------------------------------- |
| å…¥æ•°æ®ç«¯å£   | æŽ¥æ”¶ä¸Šæ¸¸æ•°æ®ï¼Œç›¸å½“äºŽå‡½æ•°å‚æ•°       |
| å‡ºæ•°æ®ç«¯å£   | è¾“å‡ºè®¡ç®—ç»“æžœï¼Œç›¸å½“äºŽå‡½æ•°è¿”å›žå€¼     |
| å…¥æŽ§åˆ¶ç«¯å£   | æŽ¥æ”¶æŽ§åˆ¶ä¿¡å·ï¼Œç”¨äºŽç‰¹æ®Šæ¿€æ´»æ¡ä»¶     |
| å‡ºæŽ§åˆ¶ç«¯å£   | å‘é€æŽ§åˆ¶ä¿¡å·ï¼Œç”¨äºŽæ¡ä»¶è§¦å‘ä¸‹æ¸¸     |
| inDependsOn  | ä¾èµ–ç«¯å£ï¼Œè¢«è¿žæŽ¥æ—¶å¿…é¡»ç­‰å¾…ä¸Šæ¸¸å®Œæˆ |
| inActivateOn | æ¿€æ´»ç«¯å£ï¼Œç”¨äºŽåé¦ˆå¾ªçŽ¯ï¼Œå¯é‡å¤è§¦å‘ |
| outTrigger   | è§¦å‘ç«¯å£ï¼ŒèŠ‚ç‚¹å®Œæˆæ—¶è‡ªåŠ¨è§¦å‘       |

### æ•°æ®ç±»åž‹

ANORA æ”¯æŒä»¥ä¸‹æ•°æ®ç±»åž‹ï¼š

| ç±»åž‹      | è¯´æ˜Ž          |
| --------- | ------------- |
| `string`  | å­—ç¬¦ä¸²        |
| `number`  | æµ®ç‚¹æ•°        |
| `integer` | æ•´æ•°          |
| `boolean` | å¸ƒå°”å€¼        |
| `array`   | æ•°ç»„          |
| `object`  | å¯¹è±¡          |
| `null`    | ç©ºå€¼/ä»»æ„ç±»åž‹ |

**ç±»åž‹è½¬æ¢ï¼š** ç«¯å£ä¹‹é—´è¿žæŽ¥æ—¶ä¼šè‡ªåŠ¨è¿›è¡Œç±»åž‹è½¬æ¢ï¼Œä¸å…¼å®¹çš„ç±»åž‹æ— æ³•è¿žæŽ¥ã€‚

### è¿žæŽ¥è§„åˆ™

1. **å‡ºç«¯å£ â†’ å…¥ç«¯å£**ï¼šæ•°æ®ä»Žå‡ºç«¯å£æµå‘å…¥ç«¯å£
2. **ç±»åž‹å…¼å®¹**ï¼šè¿žæŽ¥çš„ä¸¤ç«¯ç±»åž‹å¿…é¡»å…¼å®¹
3. **ä¸€å¯¹å¤š**ï¼šä¸€ä¸ªå‡ºç«¯å£å¯ä»¥è¿žæŽ¥å¤šä¸ªå…¥ç«¯å£
4. **å¤šå¯¹ä¸€**ï¼šå¤šä¸ªå‡ºç«¯å£è¿žæŽ¥åŒä¸€å…¥ç«¯å£æ—¶ï¼ŒåŽåˆ°çš„æ•°æ®ä¼šè¦†ç›–å…ˆåˆ°çš„

---

## åŸºç¡€èŠ‚ç‚¹

### ForwardNode (ä¸­ç»§)

ðŸ“ **å›¾æ ‡**: âž¡ï¸ | **åˆ†ç±»**: core

**åŠŸèƒ½**ï¼šåŽŸæ ·ä¼ é€’æ•°æ®ï¼Œä¸åšä»»ä½•è½¬æ¢ã€‚

| ç«¯å£ç±»åž‹ | åç§°  | æ•°æ®ç±»åž‹ | è¯´æ˜Ž     |
| -------- | ----- | -------- | -------- |
| å…¥æ•°æ®   | value | any      | è¾“å…¥æ•°æ® |
| å‡ºæ•°æ®   | value | any      | è¾“å‡ºæ•°æ® |

**é…ç½®é¡¹**ï¼š

| å­—æ®µ          | ç±»åž‹    | é»˜è®¤å€¼ | è¯´æ˜Ž             |
| ------------- | ------- | ------ | ---------------- |
| directThrough | boolean | true   | æ˜¯å¦å¯ç”¨ç›´é€šæ¨¡å¼ |

**ç›´é€šæ¨¡å¼è¯´æ˜Ž**ï¼š

- **å¯ç”¨æ—¶**ï¼šæ•°æ®åˆ°è¾¾åŽç«‹å³æ‰§è¡Œå¹¶ä¼ é€’ç»™ä¸‹æ¸¸ï¼Œä¸ç­‰å¾…å½“å‰è¿­ä»£å®Œæˆ
- **ç¦ç”¨æ—¶**ï¼šéµå¾ªæ­£å¸¸çš„è¿­ä»£æµç¨‹

**ä½¿ç”¨åœºæ™¯**ï¼š

- æ•´ç†å›¾ç»“æž„ï¼Œä½¿å¸ƒå±€æ›´æ¸…æ™°
- ä½œä¸º"åˆå¹¶é—¨"ç¡®ä¿ä¸‹æ¸¸èŠ‚ç‚¹åœ¨åŒä¸€è¿­ä»£æ‰§è¡Œ
- å»¶è¿Ÿæ•°æ®ä¼ é€’ä»¥æŽ§åˆ¶æ‰§è¡Œæ—¶åº

---

### ParameterNode (å‚æ•°)

ðŸ“ **å›¾æ ‡**: ðŸ“ | **åˆ†ç±»**: core

**åŠŸèƒ½**ï¼šè¾“å‡ºä¸€ä¸ªå›ºå®šçš„å¸¸é‡å€¼ã€‚

| ç«¯å£ç±»åž‹ | åç§°  | æ•°æ®ç±»åž‹ | è¯´æ˜Ž       |
| -------- | ----- | -------- | ---------- |
| å‡ºæ•°æ®   | value | any      | é…ç½®çš„å¸¸é‡ |

**é…ç½®é¡¹**ï¼š

| å­—æ®µ  | ç±»åž‹   | é»˜è®¤å€¼ | è¯´æ˜Ž               |
| ----- | ------ | ------ | ------------------ |
| value | string | ""     | å­—ç¬¦ä¸²å½¢å¼çš„é…ç½®å€¼ |

**å€¼è§£æžè§„åˆ™**ï¼š

1. å°è¯•å°†é…ç½®å€¼è§£æžä¸º JSON
2. å¦‚æžœè§£æžæˆåŠŸï¼Œä½¿ç”¨è§£æžåŽçš„å€¼
3. å¦‚æžœè§£æžå¤±è´¥ï¼Œä½œä¸ºå­—ç¬¦ä¸²ä½¿ç”¨

**ç¤ºä¾‹**ï¼š

| é…ç½®å€¼      | è¾“å‡ºç±»åž‹ | è¾“å‡ºå€¼    |
| ----------- | -------- | --------- |
| `42`        | number   | 42        |
| `true`      | boolean  | true      |
| `[1, 2, 3]` | array    | [1, 2, 3] |
| `hello`     | string   | "hello"   |
| `"hello"`   | string   | "hello"   |
| `{"a": 1}`  | object   | { a: 1 }  |

**ç‰¹æ®Šæƒ…å†µ**ï¼šéœ€è¦è¾“å‡º JSON å­—ç¬¦ä¸²æœ¬èº«æ—¶ï¼Œä½¿ç”¨åŒå±‚å¼•å·ï¼š`"\"hello\""`

---

## æ•°å­¦èŠ‚ç‚¹

### ArithmeticNode (ç®—æœ¯è¿ç®—)

ðŸ“ **å›¾æ ‡**: ðŸ”¢ | **åˆ†ç±»**: math

**åŠŸèƒ½**ï¼šå¯¹ä¸¤ä¸ªæ•°å€¼æ‰§è¡Œç®—æœ¯è¿ç®—ã€‚

| ç«¯å£ç±»åž‹ | åç§°   | æ•°æ®ç±»åž‹ | è¯´æ˜Ž     |
| -------- | ------ | -------- | -------- |
| å…¥æ•°æ®   | left   | number   | å·¦æ“ä½œæ•° |
| å…¥æ•°æ®   | right  | number   | å³æ“ä½œæ•° |
| å‡ºæ•°æ®   | result | number   | è¿ç®—ç»“æžœ |

**é…ç½®é¡¹**ï¼š

| å­—æ®µ      | ç±»åž‹   | é»˜è®¤å€¼ | è¯´æ˜Ž       |
| --------- | ------ | ------ | ---------- |
| operation | string | "+"    | ç®—æœ¯æ“ä½œç¬¦ |

**æ”¯æŒçš„æ“ä½œ**ï¼š

| æ“ä½œç¬¦ | è¯´æ˜Ž   | ç¤ºä¾‹         |
| ------ | ------ | ------------ |
| `+`    | åŠ æ³•   | 3 + 2 = 5    |
| `-`    | å‡æ³•   | 3 - 2 = 1    |
| `*`    | ä¹˜æ³•   | 3 \* 2 = 6   |
| `/`    | é™¤æ³•   | 6 / 2 = 3    |
| `%`    | å–æ¨¡   | 7 % 3 = 1    |
| `**`   | å¹‚è¿ç®— | 2 \*\* 3 = 8 |

**é”™è¯¯å¤„ç†**ï¼šé™¤æ³•æˆ–å–æ¨¡æ—¶ï¼Œå¦‚æžœå³æ“ä½œæ•°ä¸º 0ï¼Œä¼šæŠ›å‡ºé”™è¯¯ã€‚

---

## é€»è¾‘èŠ‚ç‚¹

### CompareNode (æ¯”è¾ƒ)

ðŸ“ **å›¾æ ‡**: âš–ï¸ | **åˆ†ç±»**: logic

**åŠŸèƒ½**ï¼šæ¯”è¾ƒä¸¤ä¸ªå€¼ï¼Œè¾“å‡ºå¸ƒå°”ç»“æžœã€‚

| ç«¯å£ç±»åž‹ | åç§°   | æ•°æ®ç±»åž‹ | è¯´æ˜Ž     |
| -------- | ------ | -------- | -------- |
| å…¥æ•°æ®   | left   | any      | å·¦æ“ä½œæ•° |
| å…¥æ•°æ®   | right  | any      | å³æ“ä½œæ•° |
| å‡ºæ•°æ®   | result | boolean  | æ¯”è¾ƒç»“æžœ |

**é…ç½®é¡¹**ï¼š

| å­—æ®µ      | ç±»åž‹   | é»˜è®¤å€¼ | è¯´æ˜Ž       |
| --------- | ------ | ------ | ---------- |
| operation | string | "=="   | æ¯”è¾ƒæ“ä½œç¬¦ |

**æ”¯æŒçš„æ“ä½œ**ï¼š

| æ“ä½œç¬¦ | è¯´æ˜Ž       | è¯´æ˜Ž               |
| ------ | ---------- | ------------------ |
| `==`   | ç›¸ç­‰       | ç±»åž‹è‡ªåŠ¨è½¬æ¢åŽæ¯”è¾ƒ |
| `!=`   | ä¸ç›¸ç­‰     | ç±»åž‹è‡ªåŠ¨è½¬æ¢åŽæ¯”è¾ƒ |
| `>`    | å¤§äºŽ       | æ•°å€¼æ¯”è¾ƒ           |
| `>=`   | å¤§äºŽç­‰äºŽ   | æ•°å€¼æ¯”è¾ƒ           |
| `<`    | å°äºŽ       | æ•°å€¼æ¯”è¾ƒ           |
| `<=`   | å°äºŽç­‰äºŽ   | æ•°å€¼æ¯”è¾ƒ           |
| `===`  | ä¸¥æ ¼ç›¸ç­‰   | ç±»åž‹å’Œå€¼éƒ½ç›¸ç­‰     |
| `!==`  | ä¸¥æ ¼ä¸ç›¸ç­‰ | ç±»åž‹æˆ–å€¼ä¸ç›¸ç­‰     |

---

### LogicNode (é€»è¾‘è¿ç®—)

ðŸ“ **å›¾æ ‡**: ðŸ”£ | **åˆ†ç±»**: logic

**åŠŸèƒ½**ï¼šæ‰§è¡Œé€»è¾‘è¿ç®—ã€‚

| ç«¯å£ç±»åž‹ | åç§°   | æ•°æ®ç±»åž‹ | è¯´æ˜Ž                  |
| -------- | ------ | -------- | --------------------- |
| å…¥æ•°æ®   | left   | boolean  | å·¦æ“ä½œæ•°              |
| å…¥æ•°æ®   | right  | boolean  | å³æ“ä½œæ•° (NOT æ—¶å¿½ç•¥) |
| å‡ºæ•°æ®   | result | boolean  | è¿ç®—ç»“æžœ              |

**é…ç½®é¡¹**ï¼š

| å­—æ®µ      | ç±»åž‹   | é»˜è®¤å€¼ | è¯´æ˜Ž     |
| --------- | ------ | ------ | -------- |
| operation | string | "AND"  | é€»è¾‘æ“ä½œ |

**æ”¯æŒçš„æ“ä½œ**ï¼š

| æ“ä½œ   | è¯´æ˜Ž | å…¬å¼                |
| ------ | ---- | ------------------- |
| `AND`  | ä¸Ž   | left && right       |
| `OR`   | æˆ–   | left \|\| right     |
| `NOT`  | éž   | !left               |
| `XOR`  | å¼‚æˆ– | (L\|\|R) && !(L&&R) |
| `NAND` | ä¸Žéž | !(left && right)    |
| `NOR`  | æˆ–éž | !(left \|\| right)  |

---

### BranchNode (åˆ†æ”¯)

ðŸ“ **å›¾æ ‡**: ðŸ”€ | **åˆ†ç±»**: logic

**åŠŸèƒ½**ï¼šæ ¹æ®æ¡ä»¶é€‰æ‹©æ‰§è¡Œè·¯å¾„ã€‚

| ç«¯å£ç±»åž‹ | åç§°      | æ•°æ®ç±»åž‹ | è¯´æ˜Ž           |
| -------- | --------- | -------- | -------------- |
| å…¥æ•°æ®   | condition | boolean  | æ¡ä»¶å€¼         |
| å‡ºæŽ§åˆ¶   | onTrue    | null     | æ¡ä»¶ä¸ºçœŸæ—¶è§¦å‘ |
| å‡ºæŽ§åˆ¶   | onFalse   | null     | æ¡ä»¶ä¸ºå‡æ—¶è§¦å‘ |

**ä½¿ç”¨åœºæ™¯**ï¼š

```
                      â”Œâ”€â”€â†’ [True åˆ†æ”¯å¤„ç†]
[æ¡ä»¶åˆ¤æ–­] â†’ Branch â”€â”¤
                      â””â”€â”€â†’ [False åˆ†æ”¯å¤„ç†]
```

**æ³¨æ„**ï¼šBranch åªè§¦å‘**ä¸€ä¸ª**æŽ§åˆ¶ç«¯å£ï¼Œä¸ä¼šåŒæ—¶è§¦å‘ä¸¤ä¸ªã€‚

---

## æŽ§åˆ¶æµèŠ‚ç‚¹

### DistributeNode (åˆ†é…/For-Each)

ðŸ“ **å›¾æ ‡**: ðŸ”€ | **åˆ†ç±»**: core

**åŠŸèƒ½**ï¼šå°†æ•°ç»„å…ƒç´ é€ä¸ªåˆ†å‘ç»™ä¸‹æ¸¸ï¼Œå®žçŽ° for-each å¾ªçŽ¯ã€‚

| ç«¯å£ç±»åž‹ | åç§°  | æ•°æ®ç±»åž‹ | è¯´æ˜Ž                   |
| -------- | ----- | -------- | ---------------------- |
| å…¥æ•°æ®   | array | array    | è¦éåŽ†çš„æ•°ç»„           |
| å‡ºæ•°æ®   | item  | any      | å½“å‰å…ƒç´                |
| å‡ºæ•°æ®   | index | integer  | å½“å‰ç´¢å¼•               |
| å‡ºæŽ§åˆ¶   | done  | null     | æ‰€æœ‰å…ƒç´ è¾“å‡ºå®Œæ¯•æ—¶è§¦å‘ |

**æ‰§è¡Œæœºåˆ¶**ï¼š

1. æŽ¥æ”¶æ•°ç»„åŽï¼Œåœ¨**å¤šæ¬¡è¿­ä»£**ä¸­ä¾æ¬¡è¾“å‡ºæ¯ä¸ªå…ƒç´ 
2. æ¯æ¬¡è¿­ä»£è¾“å‡ºä¸€ä¸ªå…ƒç´ å’Œå…¶ç´¢å¼•
3. æœ€åŽä¸€ä¸ªå…ƒç´ è¾“å‡ºæ—¶ï¼ŒåŒæ—¶è§¦å‘ `done` ç«¯å£
4. åˆ†å‘æœŸé—´æ”¶åˆ°æ–°æ•°ç»„ä¼šè¢«**ä¸¢å¼ƒ**ï¼Œç»§ç»­å®Œæˆå½“å‰åˆ†å‘

**ç¤ºä¾‹æµç¨‹**ï¼š

```
è¾“å…¥: [A, B, C]

è¿­ä»£ 1: item=A, index=0
è¿­ä»£ 2: item=B, index=1
è¿­ä»£ 3: item=C, index=2, done è§¦å‘
```

---

### AggregateNode (èšé›†)

ðŸ“ **å›¾æ ‡**: ðŸ”— | **åˆ†ç±»**: core

**åŠŸèƒ½**ï¼šæ”¶é›†å¤šä¸ªå€¼ç»„æˆæ•°ç»„ã€‚

| ç«¯å£ç±»åž‹ | åç§°      | æ•°æ®ç±»åž‹ | è¯´æ˜Ž              |
| -------- | --------- | -------- | ----------------- |
| å…¥æ•°æ®   | item      | any      | è¦æ”¶é›†çš„å…ƒç´       |
| å…¥æŽ§åˆ¶   | aggregate | null     | è§¦å‘æ”¶é›†å½“å‰ item |
| å‡ºæ•°æ®   | array     | array    | æ”¶é›†çš„æ•°ç»„        |

**ä¸¤ç§æ¿€æ´»æ¨¡å¼**ï¼š

| è§¦å‘ç«¯å£         | è¡Œä¸º                       |
| ---------------- | -------------------------- |
| aggregate (æŽ§åˆ¶) | å°† item ç«¯å£çš„æ•°æ®åŠ å…¥ç¼“å­˜ |
| inDependsOn      | è¾“å‡ºç¼“å­˜æ•°ç»„å¹¶æ¸…ç©ºç¼“å­˜     |

**å…¸åž‹ç”¨æ³•**ï¼šä¸Ž DistributeNode é…åˆå®žçŽ° map/filter æ“ä½œã€‚

**ç¤ºä¾‹ï¼šå®žçŽ° map æ“ä½œ**

```
[1, 2, 3] â†’ Distribute â†’ [å¤„ç†] â†’ Aggregate
                â†“             â†“
              item          aggregate (æŽ§åˆ¶)
                â†“
            [å¤„ç†ç»“æžœ]
                â†“
         Aggregate.item

Distribute.done â†’ Aggregate.inDependsOn â†’ è¾“å‡ºç»“æžœæ•°ç»„
```

---

## å­—ç¬¦ä¸²èŠ‚ç‚¹

### StringFormatNode (æ ¼å¼åŒ–)

ðŸ“ **å›¾æ ‡**: ðŸ“„ | **åˆ†ç±»**: string

**åŠŸèƒ½**ï¼šä½¿ç”¨æ¨¡æ¿å­—ç¬¦ä¸²æ ¼å¼åŒ–è¾“å‡ºã€‚

| ç«¯å£ç±»åž‹ | åç§°   | æ•°æ®ç±»åž‹ | è¯´æ˜Ž             |
| -------- | ------ | -------- | ---------------- |
| å…¥æ•°æ®   | args   | object   | æ ¼å¼åŒ–å‚æ•°å¯¹è±¡   |
| å‡ºæ•°æ®   | result | string   | æ ¼å¼åŒ–åŽçš„å­—ç¬¦ä¸² |

**é…ç½®é¡¹**ï¼š

| å­—æ®µ     | ç±»åž‹   | é»˜è®¤å€¼ | è¯´æ˜Ž       |
| -------- | ------ | ------ | ---------- |
| template | string | ""     | æ¨¡æ¿å­—ç¬¦ä¸² |

**æ¨¡æ¿è¯­æ³•**ï¼šä½¿ç”¨ `{å˜é‡å}` å ä½ç¬¦ï¼Œä¼šè¢« args ä¸­å¯¹åº”çš„å€¼æ›¿æ¢ã€‚

**ç¤ºä¾‹**ï¼š

```
æ¨¡æ¿: "Hello, {name}! You are {age} years old."
å‚æ•°: { "name": "Alice", "age": 25 }
è¾“å‡º: "Hello, Alice! You are 25 years old."
```

---

## æ•°æ®èŠ‚ç‚¹

### ObjectAccessNode (å¯¹è±¡è®¿é—®)

ðŸ“ **å›¾æ ‡**: ðŸ“¦ | **åˆ†ç±»**: data

**åŠŸèƒ½**ï¼šè®¿é—®å¯¹è±¡çš„å±žæ€§å€¼ã€‚

| ç«¯å£ç±»åž‹ | åç§°   | æ•°æ®ç±»åž‹ | è¯´æ˜Ž     |
| -------- | ------ | -------- | -------- |
| å…¥æ•°æ®   | object | object   | è¾“å…¥å¯¹è±¡ |
| å…¥æ•°æ®   | key    | string   | å±žæ€§å   |
| å‡ºæ•°æ®   | value  | any      | å±žæ€§å€¼   |

**ç¤ºä¾‹**ï¼š

```
object: { "name": "Alice", "age": 25 }
key: "name"
value: "Alice"
```

---

### ObjectSetNode (å¯¹è±¡è®¾ç½®)

ðŸ“ **å›¾æ ‡**: ðŸ“¦ | **åˆ†ç±»**: data

**åŠŸèƒ½**ï¼šè®¾ç½®å¯¹è±¡çš„å±žæ€§å€¼ï¼Œè¿”å›žæ–°å¯¹è±¡ã€‚

| ç«¯å£ç±»åž‹ | åç§°   | æ•°æ®ç±»åž‹ | è¯´æ˜Ž         |
| -------- | ------ | -------- | ------------ |
| å…¥æ•°æ®   | object | object   | è¾“å…¥å¯¹è±¡     |
| å…¥æ•°æ®   | key    | string   | å±žæ€§å       |
| å…¥æ•°æ®   | value  | any      | æ–°å€¼         |
| å‡ºæ•°æ®   | object | object   | æ›´æ–°åŽçš„å¯¹è±¡ |

---

### ArrayAccessNode (æ•°ç»„è®¿é—®)

ðŸ“ **å›¾æ ‡**: ðŸ“š | **åˆ†ç±»**: data

**åŠŸèƒ½**ï¼šè®¿é—®æ•°ç»„å…ƒç´ ã€‚

| ç«¯å£ç±»åž‹ | åç§°  | æ•°æ®ç±»åž‹ | è¯´æ˜Ž     |
| -------- | ----- | -------- | -------- |
| å…¥æ•°æ®   | array | array    | è¾“å…¥æ•°ç»„ |
| å…¥æ•°æ®   | index | integer  | ç´¢å¼•     |
| å‡ºæ•°æ®   | item  | any      | å…ƒç´ å€¼   |

---

### ArrayPushNode (æ•°ç»„è¿½åŠ )

ðŸ“ **å›¾æ ‡**: ðŸ“š | **åˆ†ç±»**: data

**åŠŸèƒ½**ï¼šå‘æ•°ç»„æœ«å°¾è¿½åŠ å…ƒç´ ï¼Œè¿”å›žæ–°æ•°ç»„ã€‚

| ç«¯å£ç±»åž‹ | åç§°  | æ•°æ®ç±»åž‹ | è¯´æ˜Ž         |
| -------- | ----- | -------- | ------------ |
| å…¥æ•°æ®   | array | array    | è¾“å…¥æ•°ç»„     |
| å…¥æ•°æ®   | item  | any      | è¦è¿½åŠ çš„å…ƒç´  |
| å‡ºæ•°æ®   | array | array    | æ–°æ•°ç»„       |

---

### ArrayLengthNode (æ•°ç»„é•¿åº¦)

ðŸ“ **å›¾æ ‡**: ðŸ“š | **åˆ†ç±»**: data

**åŠŸèƒ½**ï¼šèŽ·å–æ•°ç»„é•¿åº¦ã€‚

| ç«¯å£ç±»åž‹ | åç§°   | æ•°æ®ç±»åž‹ | è¯´æ˜Ž     |
| -------- | ------ | -------- | -------- |
| å…¥æ•°æ®   | array  | array    | è¾“å…¥æ•°ç»„ |
| å‡ºæ•°æ®   | length | integer  | æ•°ç»„é•¿åº¦ |

---

## è°ƒè¯•èŠ‚ç‚¹

### ConsoleLogNode (æŽ§åˆ¶å°è¾“å‡º)

ðŸ“ **å›¾æ ‡**: ðŸ–¥ï¸ | **åˆ†ç±»**: debug

**åŠŸèƒ½**ï¼šå°†è¾“å…¥å€¼æ‰“å°åˆ°æµè§ˆå™¨æŽ§åˆ¶å°ã€‚

| ç«¯å£ç±»åž‹ | åç§°    | æ•°æ®ç±»åž‹ | è¯´æ˜Ž       |
| -------- | ------- | -------- | ---------- |
| å…¥æ•°æ®   | message | any      | è¦æ‰“å°çš„å€¼ |

---

### NotifyNode (é€šçŸ¥)

ðŸ“ **å›¾æ ‡**: ðŸ”” | **åˆ†ç±»**: debug

**åŠŸèƒ½**ï¼šåœ¨ UI ä¸Šæ˜¾ç¤ºé€šçŸ¥æ¶ˆæ¯ã€‚

| ç«¯å£ç±»åž‹ | åç§°    | æ•°æ®ç±»åž‹ | è¯´æ˜Ž     |
| -------- | ------- | -------- | -------- |
| å…¥æ•°æ®   | message | string   | é€šçŸ¥å†…å®¹ |

**é…ç½®é¡¹**ï¼š

| å­—æ®µ | ç±»åž‹   | é»˜è®¤å€¼ | è¯´æ˜Ž                                    |
| ---- | ------ | ------ | --------------------------------------- |
| type | string | "info" | é€šçŸ¥ç±»åž‹: info, success, warning, error |

---

## å¸¸è§æ¨¡å¼

### å¾ªçŽ¯å¤„ç†

ä½¿ç”¨ `DistributeNode` + `AggregateNode` å®žçŽ°æ•°ç»„éåŽ†å’Œç»“æžœæ”¶é›†ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                 â”‚
â”‚  [æ•°ç»„] â†’ Distribute â”€â†’ [å¤„ç†] â”€â†’ Aggregate    â”‚
â”‚              â”‚                       â†‘          â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                    item              aggregate  â”‚
â”‚              â”‚                       â”‚          â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€doneâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                                   inDependsOn   â”‚
â”‚                                       â†“         â”‚
â”‚                                  [è¾“å‡ºæ•°ç»„]     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**è¿žæŽ¥æ–¹å¼**ï¼š

1. `Distribute.item` â†’ `[å¤„ç†èŠ‚ç‚¹]` â†’ `Aggregate.item`
2. `Distribute.outTrigger` â†’ `Aggregate.aggregate` (æŽ§åˆ¶ç«¯å£)
3. `Distribute.done` â†’ `Aggregate.inDependsOn`

### æ¡ä»¶åˆ†æ”¯

ä½¿ç”¨ `BranchNode` å®žçŽ°æ¡ä»¶æ‰§è¡Œï¼š

```
[è®¡ç®—æ¡ä»¶] â†’ Compare â†’ Branch
                         â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â†“            â†“            â†“
         onTrue       onFalse
            â”‚            â”‚
        [çœŸåˆ†æ”¯]     [å‡åˆ†æ”¯]
```

### æ•°æ®èšåˆ

å°†å¤šä¸ªç‹¬ç«‹å€¼æ”¶é›†æˆæ•°ç»„ï¼š

```
[å€¼1] â”€â”
       â”œâ†’ è§¦å‘ Aggregate ä¸‰æ¬¡ â†’ Aggregate â†’ [æ•°ç»„]
[å€¼2] â”€â”¤        â†‘
       â”‚   aggregate (æŽ§åˆ¶ç«¯å£)
[å€¼3] â”€â”˜
```

**æ­¥éª¤**ï¼š

1. æ¯ä¸ªè¾“å…¥å€¼åˆ°è¾¾æ—¶ï¼Œè¿žæŽ¥åˆ° `Aggregate.item` å’Œè§¦å‘ `Aggregate.aggregate`
2. æ‰€æœ‰å€¼æ”¶é›†å®ŒæˆåŽï¼Œè§¦å‘ `Aggregate.inDependsOn` è¾“å‡ºç»“æžœ

---

## æ‰§è¡Œæœºåˆ¶è¯´æ˜Ž

### æ¿€æ´»æ¡ä»¶

èŠ‚ç‚¹çš„é»˜è®¤æ¿€æ´»æ¡ä»¶ï¼š

1. **æ— å…¥è¾¹**ï¼šé¦–æ¬¡è¿­ä»£å³å¯æ¿€æ´»ï¼ˆå¦‚ ParameterNodeï¼‰
2. **æœ‰å…¥è¾¹**ï¼šæ‰€æœ‰è¢«è¿žæŽ¥çš„å…¥ç«¯å£éƒ½æœ‰**æ–°æ•°æ®**æ—¶æ¿€æ´»

### æ–°æ•°æ®å®šä¹‰

- æ¯æ¬¡ `write()` æ•°æ®æ—¶ï¼Œç«¯å£ç‰ˆæœ¬å·é€’å¢ž
- æ¯æ¬¡ `read()` æ•°æ®æ—¶ï¼Œè®°å½•å·²è¯»ç‰ˆæœ¬å·
- "æ–°æ•°æ®" = å†™å…¥åŽæœªè¢«è¯»å–çš„æ•°æ®

### inActivateOn ç«¯å£

ç”¨äºŽå¾ªçŽ¯ç»“æž„ä¸­çš„åé¦ˆè§¦å‘ï¼š

- è¢«è§¦å‘æ—¶ï¼Œ**å¿½ç•¥"æ–°æ•°æ®"æ£€æŸ¥**
- åªè¦å…¥ç«¯å£æœ‰æ•°æ®ï¼ˆä¸ç®¡æ–°æ—§ï¼‰å°±å¯ä»¥æ¿€æ´»
- å…è®¸é‡ç”¨ä¸Šä¸€æ¬¡æ‰§è¡Œçš„æ•°æ®

---

## ç›¸å…³æ–‡æ¡£

- [ANORA é¡¹ç›®æ–‡æ¡£](./story.md) - è¯¦ç»†çš„æŠ€æœ¯è§„èŒƒ
- [å›žæ”¾ IPC æŒ‡å—](./replay-ipc-guide.md) - å›žæ”¾æ¨¡å¼çš„å¤–éƒ¨æŽ§åˆ¶
